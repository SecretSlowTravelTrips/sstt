var e=Object.defineProperty,t=Object.defineProperties,n=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,i=(t,n,a)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[n]=a,l=(e,t)=>{for(var n in t||(t={}))r.call(t,n)&&i(e,n,t[n]);if(a)for(var n of a(t))s.call(t,n)&&i(e,n,t[n]);return e},o=(e,a)=>t(e,n(a));import{S as c,i as d,s as u,E as f,F as m,G as p,x as h,u as $,e as g,c as w,a as y,d as v,b,f as x,r as k,w as E,y as Q,J as L,A,K as T,D as j,L as S,M as D,N as O,O as B,I as P,t as I,k as N,g as M,n as C,H as R,h as U,j as F,m as q,o as V,v as H,P as _,Q as W,R as z,T as G,l as Y,U as J,V as Z,W as X,X as K,Y as ee,Z as te,_ as ne,z as ae,$ as re,a0 as se,a1 as ie,a2 as le,a3 as oe,a4 as ce,a5 as de,a6 as ue,a7 as fe,a8 as me,a9 as pe,aa as he,ab as $e,ac as ge,ad as we,ae as ye,af as ve,ag as be,ah as xe,ai as ke}from"../chunks/vendor-bc5221ed.js";const Ee={};function Qe(e){let t;const n=e[10].default,a=j(n,e,e[9],null);return{c(){a&&a.c()},l(e){a&&a.l(e)},m(e,n){a&&a.m(e,n),t=!0},p(e,r){a&&a.p&&(!t||512&r)&&f(a,n,e,e[9],t?p(n,e[9],r,null):m(e[9]),null)},i(e){t||(h(a,e),t=!0)},o(e){$(a,e),t=!1},d(e){a&&a.d(e)}}}function Le(e){let t,n,a=e[1]&&e[2]&&Qe(e);return{c(){t=g("div"),a&&a.c(),this.h()},l(e){t=w(e,"DIV",{class:!0});var n=y(t);a&&a.l(n),n.forEach(v),this.h()},h(){b(t,"class","w-full h-full")},m(r,s){x(r,t,s),a&&a.m(t,null),e[11](t),n=!0},p(e,[n]){e[1]&&e[2]?a?(a.p(e,n),6&n&&h(a,1)):(a=Qe(e),a.c(),h(a,1),a.m(t,null)):a&&(k(),$(a,1,1,(()=>{a=null})),E())},i(e){n||(h(a),n=!0)},o(e){$(a),n=!1},d(n){n&&v(t),a&&a.d(),e[11](null)}}}function Ae(e,t,n){let a,r,{$$slots:s={},$$scope:i}=t,{initialLat:l}=t,{initialLon:o}=t,{initialZoom:c}=t,d=!1;const u=(e,t)=>(t&&(e.zoom=t),e);return Q(Ee,{getMap:()=>r}),L.accessToken="pk.eyJ1IjoiYXVsb2luIiwiYSI6ImNrcTZqY2hkbTBsdW8ydm10MjA1d3JtdXcifQ.la7nPjxVSjf3o5EQx5QK5g",A((()=>{n(1,r=new L.Map({container:a,style:"mapbox://styles/mapbox/streets-v8",center:[o,l],zoom:c,attributionControl:!1})),r.addControl(new L.NavigationControl({showCompass:!1}),"top-left"),r.addControl(new L.AttributionControl({compact:!1})),r.on("load",(()=>{n(2,d=!0)}))})),T((()=>{r&&r.remove()})),e.$$set=e=>{"initialLat"in e&&n(3,l=e.initialLat),"initialLon"in e&&n(4,o=e.initialLon),"initialZoom"in e&&n(5,c=e.initialZoom),"$$scope"in e&&n(9,i=e.$$scope)},[a,r,d,l,o,c,(e,t,n)=>{e&&t&&r.jumpTo(u({center:[e,t]},n))},(e,t,n)=>{e&&t&&r.flyTo(u({center:[e,t],bearing:0,speed:1,curve:1,essential:!0},n))},()=>{r.resize()},i,s,function(e){S[e?"unshift":"push"]((()=>{a=e,n(0,a)}))}]}class Te extends c{constructor(e){super(),d(this,e,Ae,Le,u,{initialLat:3,initialLon:4,initialZoom:5,jumpTo:6,flyTo:7,invalidateSize:8})}get jumpTo(){return this.$$.ctx[6]}get flyTo(){return this.$$.ctx[7]}get invalidateSize(){return this.$$.ctx[8]}}function je(e,t,n){let{trail:a}=t;const{getMap:r}=D(Ee),s=r();return A((()=>{const e=O(a).geometry.coordinates;s.jumpTo({center:[e[0],e[1]],zoom:10.5}),s.addSource("trail",{type:"geojson",data:a}),s.addLayer({id:"trail",source:"trail",type:"line",paint:{"line-width":7,"line-color":"indigo","line-opacity":.7}})})),T((()=>{s.getLayer("trail")&&s.removeLayer("trail"),s.getSource("trail")&&s.removeSource("trail")})),e.$$set=e=>{"trail"in e&&n(0,a=e.trail)},e.$$.update=()=>{1&e.$$.dirty&&s.getSource("trail")&&s.getSource("trail").setData(a)},[a]}class Se extends c{constructor(e){super(),d(this,e,je,null,u,{trail:0})}}function De(e,t,n){let{buffer:a}=t;const{getMap:r}=D(Ee),s=r();return A((()=>{s.addSource("buffer",{type:"geojson",data:a}),s.addLayer({id:"buffer",source:"buffer",type:"fill",paint:{"fill-opacity":.2}})})),T((()=>{s.getLayer("buffer")&&s.removeLayer("buffer"),s.getSource("buffer")&&s.removeSource("buffer")})),e.$$set=e=>{"buffer"in e&&n(0,a=e.buffer)},e.$$.update=()=>{1&e.$$.dirty&&s.getSource("buffer")&&s.getSource("buffer").setData(a)},[a]}class Oe extends c{constructor(e){super(),d(this,e,De,null,u,{buffer:0})}}function Be(e){let t,n,a;return{c(){t=g("input"),this.h()},l(e){t=w(e,"INPUT",{type:!0,name:!0,max:!0,id:!0,class:!0}),this.h()},h(){b(t,"type",e[1]),b(t,"name",e[2]),t.value=e[0],b(t,"max",e[4]),b(t,"id",e[3]),b(t,"class","px-3 py-2 rounded w-full"),t.disabled=e[5]},m(r,s){x(r,t,s),n||(a=B(t,"input",e[6]),n=!0)},p(e,[n]){2&n&&b(t,"type",e[1]),4&n&&b(t,"name",e[2]),1&n&&t.value!==e[0]&&(t.value=e[0]),16&n&&b(t,"max",e[4]),8&n&&b(t,"id",e[3]),32&n&&(t.disabled=e[5])},i:P,o:P,d(e){e&&v(t),n=!1,a()}}}function Pe(e,t,n){let{type:a="text"}=t,{name:r=null}=t,{id:s=r}=t,{max:i}=t,{value:l}=t,{disabled:o=!1}=t;return e.$$set=e=>{"type"in e&&n(1,a=e.type),"name"in e&&n(2,r=e.name),"id"in e&&n(3,s=e.id),"max"in e&&n(4,i=e.max),"value"in e&&n(0,l=e.value),"disabled"in e&&n(5,o=e.disabled)},[l,a,r,s,i,o,e=>{n(0,l=a.match(/^(number|range)$/)?+e.target.value:e.target.value)}]}class Ie extends c{constructor(e){super(),d(this,e,Pe,Be,u,{type:1,name:2,id:3,max:4,value:0,disabled:5})}}function Ne(e){let t,n,a,r,s;const i=e[3].default,l=j(i,e,e[2],null);return{c(){t=g("label"),n=g("span"),a=I(e[0]),r=N(),l&&l.c(),this.h()},l(s){t=w(s,"LABEL",{for:!0});var i=y(t);n=w(i,"SPAN",{class:!0});var o=y(n);a=M(o,e[0]),o.forEach(v),r=C(i),l&&l.l(i),i.forEach(v),this.h()},h(){b(n,"class","block pb-2"),b(t,"for",e[1])},m(e,i){x(e,t,i),R(t,n),R(n,a),R(t,r),l&&l.m(t,null),s=!0},p(e,[n]){(!s||1&n)&&U(a,e[0]),l&&l.p&&(!s||4&n)&&f(l,i,e,e[2],s?p(i,e[2],n,null):m(e[2]),null),(!s||2&n)&&b(t,"for",e[1])},i(e){s||(h(l,e),s=!0)},o(e){$(l,e),s=!1},d(e){e&&v(t),l&&l.d(e)}}}function Me(e,t,n){let{$$slots:a={},$$scope:r}=t,{label:s}=t,{labelFor:i=null}=t;return e.$$set=e=>{"label"in e&&n(0,s=e.label),"labelFor"in e&&n(1,i=e.labelFor),"$$scope"in e&&n(2,r=e.$$scope)},[s,i,r,a]}class Ce extends c{constructor(e){super(),d(this,e,Me,Ne,u,{label:0,labelFor:1})}}function Re(e){let t,n,a;return{c(){t=g("input"),this.h()},l(e){t=w(e,"INPUT",{type:!0,accept:!0,class:!0}),this.h()},h(){t.disabled=e[1],b(t,"type","file"),b(t,"accept",".geojson,.gpx"),b(t,"class","border border-gray-500 w-full focus:ring-blue-600 bg-white \n      rounded focus:outline-none focus:ring-2 focus:border-transparent")},m(r,s){x(r,t,s),n||(a=[B(t,"change",e[3]),B(t,"change",e[2])],n=!0)},p(e,n){2&n&&(t.disabled=e[1])},d(e){e&&v(t),n=!1,_(a)}}}function Ue(e){let t,n;return t=new Ce({props:{label:"Upload your trail",$$slots:{default:[Re]},$$scope:{ctx:e}}}),{c(){F(t.$$.fragment)},l(e){q(t.$$.fragment,e)},m(e,a){V(t,e,a),n=!0},p(e,[n]){const a={};19&n&&(a.$$scope={dirty:n,ctx:e}),t.$set(a)},i(e){n||(h(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){H(t,e)}}}function Fe(e,t,n){let{files:a}=t,{disabled:r=!1}=t;return e.$$set=e=>{"files"in e&&n(0,a=e.files),"disabled"in e&&n(1,r=e.disabled)},[a,r,function(t){W.call(this,e,t)},function(){a=this.files,n(0,a)}]}class qe extends c{constructor(e){super(),d(this,e,Fe,Ue,u,{files:0,disabled:1})}}function Ve(e){let t,n,a;return{c(){t=G("svg"),n=G("circle"),a=G("path"),this.h()},l(e){t=w(e,"svg",{class:!0,xmlns:!0,fill:!0,viewBox:!0},1);var r=y(t);n=w(r,"circle",{class:!0,cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0},1),y(n).forEach(v),a=w(r,"path",{class:!0,fill:!0,d:!0},1),y(a).forEach(v),r.forEach(v),this.h()},h(){b(n,"class","opacity-25"),b(n,"cx","12"),b(n,"cy","12"),b(n,"r","10"),b(n,"stroke","currentColor"),b(n,"stroke-width","4"),b(a,"class","opacity-75"),b(a,"fill","currentColor"),b(a,"d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"),b(t,"class","animate-spin -ml-1 text-gray-600 svelte-gj1gae"),b(t,"xmlns","http://www.w3.org/2000/svg"),b(t,"fill","none"),b(t,"viewBox","0 0 24 24")},m(e,r){x(e,t,r),R(t,n),R(t,a)},p:P,d(e){e&&v(t)}}}function He(e){let t;function n(e,t){return e[1]?We:_e}let a=n(e),r=a(e);return{c(){r.c(),t=Y()},l(e){r.l(e),t=Y()},m(e,n){r.m(e,n),x(e,t,n)},p(e,s){a===(a=n(e))&&r?r.p(e,s):(r.d(1),r=a(e),r&&(r.c(),r.m(t.parentNode,t)))},d(e){r.d(e),e&&v(t)}}}function _e(e){let t,n;return{c(){t=G("svg"),n=G("path"),this.h()},l(e){t=w(e,"svg",{xmlns:!0,viewBox:!0,fill:!0,class:!0},1);var a=y(t);n=w(a,"path",{d:!0},1),y(n).forEach(v),a.forEach(v),this.h()},h(){b(n,"d","M5.5 16a3.5 3.5 0 01-.369-6.98 4 4 0 117.753-1.977A4.5 4.5 0 1113.5 16h-8z"),b(t,"xmlns","http://www.w3.org/2000/svg"),b(t,"viewBox","0 0 20 20"),b(t,"fill","currentColor"),b(t,"class","svelte-gj1gae")},m(e,a){x(e,t,a),R(t,n)},p:P,d(e){e&&v(t)}}}function We(e){let t;function n(e,t){return e[0]?ze:Ge}let a=n(e),r=a(e);return{c(){r.c(),t=Y()},l(e){r.l(e),t=Y()},m(e,n){r.m(e,n),x(e,t,n)},p(e,s){a!==(a=n(e))&&(r.d(1),r=a(e),r&&(r.c(),r.m(t.parentNode,t)))},d(e){r.d(e),e&&v(t)}}}function ze(e){let t,n;return{c(){t=G("svg"),n=G("path"),this.h()},l(e){t=w(e,"svg",{class:!0,xmlns:!0,viewBox:!0,fill:!0},1);var a=y(t);n=w(a,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0},1),y(n).forEach(v),a.forEach(v),this.h()},h(){b(n,"stroke-linecap","round"),b(n,"stroke-linejoin","round"),b(n,"stroke-width","2"),b(n,"d","M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636"),b(t,"class","stroke-current svelte-gj1gae"),b(t,"xmlns","http://www.w3.org/2000/svg"),b(t,"viewBox","0 0 24 24"),b(t,"fill","none")},m(e,a){x(e,t,a),R(t,n)},d(e){e&&v(t)}}}function Ge(e){let t,n;return{c(){t=G("svg"),n=G("path"),this.h()},l(e){t=w(e,"svg",{class:!0,xmlns:!0,viewBox:!0},1);var a=y(t);n=w(a,"path",{d:!0},1),y(n).forEach(v),a.forEach(v),this.h()},h(){b(n,"d","M13 8V2H7v6H2l8 8 8-8h-5zM0 18h20v2H0v-2z"),b(t,"class","fill-current svelte-gj1gae"),b(t,"xmlns","http://www.w3.org/2000/svg"),b(t,"viewBox","0 0 20 20")},m(e,a){x(e,t,a),R(t,n)},d(e){e&&v(t)}}}function Ye(e){let t,n,a,r,s,i;function l(e,t){return e[2]||e[3]?Ve:He}let o=l(e),c=o(e);const d=e[8].default,u=j(d,e,e[7],null);return{c(){t=g("button"),c.c(),n=N(),u&&u.c(),this.h()},l(e){t=w(e,"BUTTON",{class:!0});var a=y(t);c.l(a),n=C(a),u&&u.l(a),a.forEach(v),this.h()},h(){b(t,"class","bg-transparent hover:bg-indigo-200 font-semibold py-2 px-4 rounded inline-flex items-center border border-indigo-200 hover:border-transparent\n    disabled:bg-gray-200 disabled:cursor-not-allowed"),t.disabled=a=e[0]||e[2]},m(a,l){x(a,t,l),c.m(t,null),R(t,n),u&&u.m(t,null),r=!0,s||(i=B(t,"click",e[4]),s=!0)},p(e,[s]){o===(o=l(e))&&c?c.p(e,s):(c.d(1),c=o(e),c&&(c.c(),c.m(t,n))),u&&u.p&&(!r||128&s)&&f(u,d,e,e[7],r?p(d,e[7],s,null):m(e[7]),null),(!r||5&s&&a!==(a=e[0]||e[2]))&&(t.disabled=a)},i(e){r||(h(u,e),r=!0)},o(e){$(u,e),r=!1},d(e){e&&v(t),c.d(),u&&u.d(e),s=!1,i()}}}function Je(e,t,n){let{$$slots:a={},$$scope:r}=t,{name:s}=t,{disabled:i=!1}=t,{isDown:l=!0}=t,{loading:o=!1}=t;const c=z();let d=!1,u=!1;return e.$$set=e=>{"name"in e&&n(5,s=e.name),"disabled"in e&&n(0,i=e.disabled),"isDown"in e&&n(1,l=e.isDown),"loading"in e&&n(2,o=e.loading),"$$scope"in e&&n(7,r=e.$$scope)},e.$$.update=()=>{65&e.$$.dirty&&u&&i&&n(3,d=!0),1&e.$$.dirty&&(i||n(3,d=!1))},[i,l,o,d,()=>{if(n(6,u=!0),setTimeout((()=>n(6,u=!1)),100),!i)return c("click",s)},s,u,r,a]}class Ze extends c{constructor(e){super(),d(this,e,Je,Ye,u,{name:5,disabled:0,isDown:1,loading:2})}}const Xe=e=>({}),Ke=e=>({});function et(e){let t,n;const a=e[2].help,r=j(a,e,e[1],Ke);return{c(){t=g("div"),r&&r.c(),this.h()},l(e){t=w(e,"DIV",{class:!0});var n=y(t);r&&r.l(n),n.forEach(v),this.h()},h(){b(t,"class","text-gray-700 text-sm")},m(e,a){x(e,t,a),r&&r.m(t,null),n=!0},p(e,t){r&&r.p&&(!n||2&t)&&f(r,a,e,e[1],n?p(a,e[1],t,Xe):m(e[1]),Ke)},i(e){n||(h(r,e),n=!0)},o(e){$(r,e),n=!1},d(e){e&&v(t),r&&r.d(e)}}}function tt(e){let t,n,a;const r=e[2].default,s=j(r,e,e[1],null);let i=e[0].help&&et(e);return{c(){t=g("div"),s&&s.c(),n=N(),i&&i.c(),this.h()},l(e){t=w(e,"DIV",{class:!0});var a=y(t);s&&s.l(a),n=C(a),i&&i.l(a),a.forEach(v),this.h()},h(){b(t,"class","mb-3")},m(e,r){x(e,t,r),s&&s.m(t,null),R(t,n),i&&i.m(t,null),a=!0},p(e,[n]){s&&s.p&&(!a||2&n)&&f(s,r,e,e[1],a?p(r,e[1],n,null):m(e[1]),null),e[0].help?i?(i.p(e,n),1&n&&h(i,1)):(i=et(e),i.c(),h(i,1),i.m(t,null)):i&&(k(),$(i,1,1,(()=>{i=null})),E())},i(e){a||(h(s,e),h(i),a=!0)},o(e){$(s,e),$(i),a=!1},d(e){e&&v(t),s&&s.d(e),i&&i.d()}}}function nt(e,t,n){let{$$slots:a={},$$scope:r}=t;const s=J(a);return e.$$set=e=>{"$$scope"in e&&n(1,r=e.$$scope)},[s,r,a]}class at extends c{constructor(e){super(),d(this,e,nt,tt,u,{})}}function rt(e){let t,n;return{c(){t=g("span"),n=I(e[1]),this.h()},l(a){t=w(a,"SPAN",{class:!0});var r=y(t);n=M(r,e[1]),r.forEach(v),this.h()},h(){b(t,"class","font-semibold mr-2")},m(e,a){x(e,t,a),R(t,n)},p(e,t){2&t&&U(n,e[1])},d(e){e&&v(t)}}}function st(e){let t,n;return{c(){t=g("h2"),n=I(e[1]),this.h()},l(a){t=w(a,"H2",{class:!0});var r=y(t);n=M(r,e[1]),r.forEach(v),this.h()},h(){b(t,"class","text-xl font-semibold mr-2")},m(e,a){x(e,t,a),R(t,n)},p(e,t){2&t&&U(n,e[1])},d(e){e&&v(t)}}}function it(e){let t,n,a;const r=e[5].default,s=j(r,e,e[4],null);return{c(){t=g("div"),s&&s.c(),this.h()},l(e){t=w(e,"DIV",{class:!0});var n=y(t);s&&s.l(n),n.forEach(v),this.h()},h(){b(t,"class","p-2")},m(e,n){x(e,t,n),s&&s.m(t,null),a=!0},p(e,t){s&&s.p&&(!a||16&t)&&f(s,r,e,e[4],a?p(r,e[4],t,null):m(e[4]),null)},i(e){a||(h(s,e),Z((()=>{n||(n=X(t,K,{duration:300},!0)),n.run(1)})),a=!0)},o(e){$(s,e),n||(n=X(t,K,{duration:300},!1)),n.run(0),a=!1},d(e){e&&v(t),s&&s.d(e),e&&n&&n.end()}}}function lt(e){let t,n,a,r,s,i,l,o,c,d,u,f;function m(e,t){return e[2]?st:rt}let p=m(e),Q=p(e),L=e[0]&&it(e);return{c(){t=g("details"),n=g("summary"),Q.c(),a=N(),r=g("div"),s=G("svg"),i=G("path"),c=N(),L&&L.c(),this.h()},l(e){t=w(e,"DETAILS",{class:!0});var l=y(t);n=w(l,"SUMMARY",{class:!0});var o=y(n);Q.l(o),a=C(o),r=w(o,"DIV",{class:!0});var d=y(r);s=w(d,"svg",{class:!0,xmlns:!0,viewBox:!0},1);var u=y(s);i=w(u,"path",{d:!0},1),y(i).forEach(v),u.forEach(v),d.forEach(v),o.forEach(v),c=C(l),L&&L.l(l),l.forEach(v),this.h()},h(){b(i,"d","M12.95 10.707l.707-.707L8 4.343 6.586 5.757 10.828 10l-4.242 4.243L8 15.657l4.95-4.95z"),b(s,"class",l="fill-current opacity-75 w-5 h-5 mr-2 "+(e[0]?"-rotate-90":"rotate-90")),b(s,"xmlns","http://www.w3.org/2000/svg"),b(s,"viewBox","0 0 20 20"),b(r,"class","absolute right-0"),b(n,"class",o="flex items-center relative p-2 "+(e[0]?"border-b":"")+" cursor-pointer"),b(t,"class","border")},m(l,o){x(l,t,o),R(t,n),Q.m(n,null),R(n,a),R(n,r),R(r,s),R(s,i),R(t,c),L&&L.m(t,null),d=!0,u||(f=B(t,"toggle",e[3]),u=!0)},p(e,[r]){p===(p=m(e))&&Q?Q.p(e,r):(Q.d(1),Q=p(e),Q&&(Q.c(),Q.m(n,a))),(!d||1&r&&l!==(l="fill-current opacity-75 w-5 h-5 mr-2 "+(e[0]?"-rotate-90":"rotate-90")))&&b(s,"class",l),(!d||1&r&&o!==(o="flex items-center relative p-2 "+(e[0]?"border-b":"")+" cursor-pointer"))&&b(n,"class",o),e[0]?L?(L.p(e,r),1&r&&h(L,1)):(L=it(e),L.c(),h(L,1),L.m(t,null)):L&&(k(),$(L,1,1,(()=>{L=null})),E())},i(e){d||(h(L),d=!0)},o(e){$(L),d=!1},d(e){e&&v(t),Q.d(),L&&L.d(),u=!1,f()}}}function ot(e,t,n){let{$$slots:a={},$$scope:r}=t,{summary:s}=t,{isTitle:i=!0}=t,{open:l=!1}=t;return e.$$set=e=>{"summary"in e&&n(1,s=e.summary),"isTitle"in e&&n(2,i=e.isTitle),"open"in e&&n(0,l=e.open),"$$scope"in e&&n(4,r=e.$$scope)},[l,s,i,({target:e})=>{n(0,l=e.open)},r,a]}class ct extends c{constructor(e){super(),d(this,e,ot,lt,u,{summary:1,isTitle:2,open:0})}}function dt(e){let t,n,a,r,s;return{c(){t=g("button"),n=G("svg"),a=G("path"),this.h()},l(e){t=w(e,"BUTTON",{class:!0});var r=y(t);n=w(r,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0},1);var s=y(n);a=w(s,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0},1),y(a).forEach(v),s.forEach(v),r.forEach(v),this.h()},h(){b(a,"stroke-linecap","round"),b(a,"stroke-linejoin","round"),b(a,"stroke-width","2"),b(a,"d","M6 18L18 6M6 6l12 12"),b(n,"xmlns","http://www.w3.org/2000/svg"),b(n,"class","h-4 w-4"),b(n,"fill","none"),b(n,"viewBox","0 0 24 24"),b(n,"stroke","currentColor"),b(t,"class","rounded-full hover:bg-white")},m(i,l){x(i,t,l),R(t,n),R(n,a),r||(s=B(t,"click",e[2]),r=!0)},p:P,d(e){e&&v(t),r=!1,s()}}}function ut(e){let t,n,a,r,s;const i=e[4].default,l=j(i,e,e[3],null);let o=e[0]&&dt(e);return{c(){t=g("div"),n=g("span"),l&&l.c(),r=N(),o&&o.c(),this.h()},l(e){t=w(e,"DIV",{class:!0});var a=y(t);n=w(a,"SPAN",{class:!0});var s=y(n);l&&l.l(s),s.forEach(v),r=C(a),o&&o.l(a),a.forEach(v),this.h()},h(){b(n,"class",a="pr-2 "+(e[1]?"cursor-pointer":"")),b(t,"class","px-2 bg-yellow-100 rounded-[14px] m-1 inline-flex items-center")},m(e,a){x(e,t,a),R(t,n),l&&l.m(n,null),R(t,r),o&&o.m(t,null),s=!0},p(e,[r]){l&&l.p&&(!s||8&r)&&f(l,i,e,e[3],s?p(i,e[3],r,null):m(e[3]),null),(!s||2&r&&a!==(a="pr-2 "+(e[1]?"cursor-pointer":"")))&&b(n,"class",a),e[0]?o?o.p(e,r):(o=dt(e),o.c(),o.m(t,null)):o&&(o.d(1),o=null)},i(e){s||(h(l,e),s=!0)},o(e){$(l,e),s=!1},d(e){e&&v(t),l&&l.d(e),o&&o.d()}}}function ft(e,t,n){let{$$slots:a={},$$scope:r}=t,{closeButton:s=!0}=t,{pointer:i=!1}=t;const l=z();return e.$$set=e=>{"closeButton"in e&&n(0,s=e.closeButton),"pointer"in e&&n(1,i=e.pointer),"$$scope"in e&&n(3,r=e.$$scope)},[s,i,()=>{l("close")},r,a]}class mt extends c{constructor(e){super(),d(this,e,ft,ut,u,{closeButton:0,pointer:1})}}function pt(e,t,n){const a=e.slice();return a[12]=t[n],a}function ht(e){let t,n=e[12]+"";return{c(){t=I(n)},l(e){t=M(e,n)},m(e,n){x(e,t,n)},p(e,a){1&a&&n!==(n=e[12]+"")&&U(t,n)},d(e){e&&v(t)}}}function $t(e,t){let n,a,r;return a=new mt({props:{$$slots:{default:[ht]},$$scope:{ctx:t}}}),a.$on("close",(function(){return t[7](t[12])})),{key:e,first:null,c(){n=Y(),F(a.$$.fragment),this.h()},l(e){n=Y(),q(a.$$.fragment,e),this.h()},h(){this.first=n},m(e,t){x(e,n,t),V(a,e,t),r=!0},p(e,n){t=e;const r={};32769&n&&(r.$$scope={dirty:n,ctx:t}),a.$set(r)},i(e){r||(h(a.$$.fragment,e),r=!0)},o(e){$(a.$$.fragment,e),r=!1},d(e){e&&v(n),H(a,e)}}}function gt(e){let t,n,a,r,s,i,l=[],o=new Map,c=e[0];const d=e=>e[12];for(let u=0;u<c.length;u+=1){let t=pt(e,c,u),n=d(t);o.set(n,l[u]=$t(n,t))}return{c(){t=g("div");for(let e=0;e<l.length;e+=1)l[e].c();n=N(),a=g("input"),this.h()},l(e){t=w(e,"DIV",{class:!0});var r=y(t);for(let t=0;t<l.length;t+=1)l[t].l(r);n=C(r),a=w(r,"INPUT",{id:!0,type:!0,class:!0}),r.forEach(v),this.h()},h(){b(a,"id",e[1]),b(a,"type","text"),b(a,"class","border-0 focus:ring-0 focus:ring-transparent"),b(t,"class","flex overflow-x-auto border border-gray-500 w-full focus-within:ring-blue-600 bg-white \n    rounded focus-within:ring-2 focus-within:border-transparent")},m(o,c){x(o,t,c);for(let e=0;e<l.length;e+=1)l[e].m(t,null);R(t,n),R(t,a),ee(a,e[2]),e[9](t),r=!0,s||(i=[B(a,"input",e[8]),B(a,"input",e[4])],s=!0)},p(e,[s]){33&s&&(c=e[0],k(),l=te(l,s,d,1,e,c,o,t,ne,$t,n,pt),E()),(!r||2&s)&&b(a,"id",e[1]),4&s&&a.value!==e[2]&&ee(a,e[2])},i(e){if(!r){for(let e=0;e<c.length;e+=1)h(l[e]);r=!0}},o(e){for(let t=0;t<l.length;t+=1)$(l[t]);r=!1},d(n){n&&v(t);for(let e=0;e<l.length;e+=1)l[e].d();e[9](null),s=!1,_(i)}}}function wt(e,t,n){let a,{separator:r=","}=t,{items:s=[]}=t,{id:i=null}=t,l="",o=!1;ae((()=>{if(d(a)&&o){const e=a.querySelector("input").offsetLeft-a.querySelector("input").offsetWidth-(a.offsetLeft+60);e>a.scrollLeft&&a.scrollTo(e,0)}o=!1}));const c=e=>{s.splice(s.indexOf(e),1),n(0,s=[...s])},d=e=>e.scrollWidth>e.offsetWidth;return e.$$set=e=>{"separator"in e&&n(6,r=e.separator),"items"in e&&n(0,s=e.items),"id"in e&&n(1,i=e.id)},[s,i,l,a,()=>{if(l[l.length-1]===r){const e=l.split(r)[0].trim();s.includes(e)||(n(0,s=[...s,e]),o=!0),n(2,l="")}},c,r,e=>c(e),function(){l=this.value,n(2,l)},function(e){S[e?"unshift":"push"]((()=>{a=e,n(3,a)}))}]}class yt extends c{constructor(e){super(),d(this,e,wt,gt,u,{separator:6,items:0,id:1})}}function vt(e){let t,n,a,r;return{c(){t=G("svg"),n=G("path"),this.h()},l(e){t=w(e,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0},1);var a=y(t);n=w(a,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0},1),y(n).forEach(v),a.forEach(v),this.h()},h(){b(n,"stroke-linecap","round"),b(n,"stroke-linejoin","round"),b(n,"stroke-width","2"),b(n,"d","M5 13l4 4L19 7"),b(t,"xmlns","http://www.w3.org/2000/svg"),b(t,"class","h-4 w-4 mr-2 text-yellow-800 flex-shrink-0"),b(t,"fill","none"),b(t,"viewBox","0 0 24 24"),b(t,"stroke","currentColor")},m(e,a){x(e,t,a),R(t,n),r=!0},i(e){r||(Z((()=>{a||(a=X(n,re,{},!0)),a.run(1)})),r=!0)},o(e){a||(a=X(n,re,{},!1)),a.run(0),r=!1},d(e){e&&v(t),e&&a&&a.end()}}}function bt(e){let t,n,a,r,s,i,l,o,c,d=e[0]&&vt();return{c(){t=g("label"),d&&d.c(),n=N(),a=g("input"),r=N(),s=I(e[1]),this.h()},l(i){t=w(i,"LABEL",{class:!0});var l=y(t);d&&d.l(l),n=C(l),a=w(l,"INPUT",{type:!0,class:!0}),r=C(l),s=M(l,e[1]),l.forEach(v),this.h()},h(){b(a,"type","checkbox"),b(a,"class","sr-only"),a.disabled=e[2],b(t,"class",i="inline-flex items-center cursor-pointer py-1 px-2 "+(e[0]?"bg-green-300":"bg-gray-100")+" hover:bg-green-200 focus-within:outline-black transition-colors")},m(i,u){x(i,t,u),d&&d.m(t,null),R(t,n),R(t,a),a.checked=e[0],R(t,r),R(t,s),l=!0,o||(c=[B(a,"change",e[4]),B(a,"change",e[3])],o=!0)},p(e,[r]){e[0]?d?1&r&&h(d,1):(d=vt(),d.c(),h(d,1),d.m(t,n)):d&&(k(),$(d,1,1,(()=>{d=null})),E()),(!l||4&r)&&(a.disabled=e[2]),1&r&&(a.checked=e[0]),(!l||2&r)&&U(s,e[1]),(!l||1&r&&i!==(i="inline-flex items-center cursor-pointer py-1 px-2 "+(e[0]?"bg-green-300":"bg-gray-100")+" hover:bg-green-200 focus-within:outline-black transition-colors"))&&b(t,"class",i)},i(e){l||(h(d),l=!0)},o(e){$(d),l=!1},d(e){e&&v(t),d&&d.d(),o=!1,_(c)}}}function xt(e,t,n){let{label:a}=t,{disabled:r=!1}=t,{checked:s=!1}=t;return e.$$set=e=>{"label"in e&&n(1,a=e.label),"disabled"in e&&n(2,r=e.disabled),"checked"in e&&n(0,s=e.checked)},[s,a,r,function(t){W.call(this,e,t)},function(){s=this.checked,n(0,s)}]}class kt extends c{constructor(e){super(),d(this,e,xt,bt,u,{label:1,disabled:2,checked:0})}}function Et(e){let t,n,a,r,s,i,l,o,c,d,u,f,m,p,h,$,k,E,Q,L,A,T,j,S,D,O,B,F,q=e[3].itemcount+"",V=e[3].linkcount+"",H=e[3].categories.join(", ")+"";return{c(){t=g("div"),n=g("table"),a=g("thead"),r=g("tr"),s=g("th"),i=I("Item count"),l=N(),o=g("th"),c=I("Link count"),d=N(),u=g("th"),f=I("Categories"),m=N(),p=g("tbody"),h=g("tr"),$=g("td"),k=I(q),E=N(),Q=g("td"),L=I(V),A=N(),T=g("td"),j=I(H),S=N(),D=g("a"),O=I(e[4]),this.h()},l(g){t=w(g,"DIV",{class:!0});var b=y(t);n=w(b,"TABLE",{class:!0});var x=y(n);a=w(x,"THEAD",{});var B=y(a);r=w(B,"TR",{});var P=y(r);s=w(P,"TH",{class:!0});var I=y(s);i=M(I,"Item count"),I.forEach(v),l=C(P),o=w(P,"TH",{class:!0});var N=y(o);c=M(N,"Link count"),N.forEach(v),d=C(P),u=w(P,"TH",{class:!0});var R=y(u);f=M(R,"Categories"),R.forEach(v),P.forEach(v),B.forEach(v),m=C(x),p=w(x,"TBODY",{});var U=y(p);h=w(U,"TR",{});var F=y(h);$=w(F,"TD",{class:!0});var _=y($);k=M(_,q),_.forEach(v),E=C(F),Q=w(F,"TD",{class:!0});var W=y(Q);L=M(W,V),W.forEach(v),A=C(F),T=w(F,"TD",{class:!0});var z=y(T);j=M(z,H),z.forEach(v),F.forEach(v),U.forEach(v),x.forEach(v),S=C(b),D=w(b,"A",{target:!0,rel:!0,href:!0,class:!0});var G=y(D);O=M(G,e[4]),G.forEach(v),b.forEach(v),this.h()},h(){b(s,"class","bg-blue-100 border text-left px-2 py-2"),b(o,"class","bg-blue-100 border text-left px-2 py-2"),b(u,"class","bg-blue-100 border text-left px-2 py-2"),b($,"class","border px-2 py-2"),b(Q,"class","border px-2 py-2"),b(T,"class","border px-2 py-2"),b(n,"class","w-full overflow-x-auto"),b(D,"target","_blank"),b(D,"rel","noreferrer noopener"),b(D,"href",B="https://www.wikidata.org/wiki/"+e[4]),b(D,"class","block px-2 py-2 text-blue-600 hover:underline"),b(t,"class","text-xs")},m(e,g){x(e,t,g),R(t,n),R(n,a),R(a,r),R(r,s),R(s,i),R(r,l),R(r,o),R(o,c),R(r,d),R(r,u),R(u,f),R(n,m),R(n,p),R(p,h),R(h,$),R($,k),R(h,E),R(h,Q),R(Q,L),R(h,A),R(h,T),R(T,j),R(t,S),R(t,D),R(D,O)},p(e,t){8&t&&q!==(q=e[3].itemcount+"")&&U(k,q),8&t&&V!==(V=e[3].linkcount+"")&&U(L,V),8&t&&H!==(H=e[3].categories.join(", ")+"")&&U(j,H),16&t&&U(O,e[4]),16&t&&B!==(B="https://www.wikidata.org/wiki/"+e[4])&&b(D,"href",B)},i(e){F||Z((()=>{F=ie(t,K,{}),F.start()}))},o:P,d(e){e&&v(t)}}}function Qt(e){let t,n,a,r,s,i,l,o,c,d,u,f,m;function p(t){e[7](t)}let k={label:e[1],disabled:e[2]};void 0!==e[0]&&(k.checked=e[0]),a=new kt({props:k}),S.push((()=>se(a,"checked",p))),a.$on("change",e[8]);let E=e[5]&&Et(e);return{c(){t=g("div"),n=g("div"),F(a.$$.fragment),s=N(),i=g("button"),l=G("svg"),o=G("path"),d=N(),E&&E.c(),this.h()},l(e){t=w(e,"DIV",{class:!0});var r=y(t);n=w(r,"DIV",{class:!0});var c=y(n);q(a.$$.fragment,c),s=C(c),i=w(c,"BUTTON",{class:!0});var u=y(i);l=w(u,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0},1);var f=y(l);o=w(f,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0},1),y(o).forEach(v),f.forEach(v),u.forEach(v),c.forEach(v),d=C(r),E&&E.l(r),r.forEach(v),this.h()},h(){b(o,"stroke-linecap","round"),b(o,"stroke-linejoin","round"),b(o,"stroke-width","2"),b(o,"d","M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"),b(l,"xmlns","http://www.w3.org/2000/svg"),b(l,"class","h-6 w-6 ml-1 mr-2 hover:text-gray-500 text-gray-700"),b(l,"fill","none"),b(l,"viewBox","0 0 24 24"),b(l,"stroke","currentColor"),b(i,"class","flex-shrink"),b(n,"class",c=(e[0]?"bg-green-300":"bg-gray-100")+" flex items-center"),b(t,"class","flex flex-col svelte-dw5x2n"),le(t,"show",e[5])},m(r,c){x(r,t,c),R(t,n),V(a,n,null),R(n,s),R(n,i),R(i,l),R(l,o),R(t,d),E&&E.m(t,null),u=!0,f||(m=B(i,"click",e[6]),f=!0)},p(e,[s]){const i={};2&s&&(i.label=e[1]),4&s&&(i.disabled=e[2]),!r&&1&s&&(r=!0,i.checked=e[0],oe((()=>r=!1))),a.$set(i),(!u||1&s&&c!==(c=(e[0]?"bg-green-300":"bg-gray-100")+" flex items-center"))&&b(n,"class",c),e[5]?E?(E.p(e,s),32&s&&h(E,1)):(E=Et(e),E.c(),h(E,1),E.m(t,null)):E&&(E.d(1),E=null),32&s&&le(t,"show",e[5])},i(e){u||(h(a.$$.fragment,e),h(E),u=!0)},o(e){$(a.$$.fragment,e),u=!1},d(e){e&&v(t),H(a),E&&E.d(),f=!1,m()}}}function Lt(e,t,n){const a=z();let{label:r}=t,{disabled:s=!1}=t,{checked:i=!1}=t,{details:l}=t,{type:o}=t,c=!1;return e.$$set=e=>{"label"in e&&n(1,r=e.label),"disabled"in e&&n(2,s=e.disabled),"checked"in e&&n(0,i=e.checked),"details"in e&&n(3,l=e.details),"type"in e&&n(4,o=e.type)},[i,r,s,l,o,c,()=>{n(5,c=!c),a("click",{show:c})},function(e){i=e,n(0,i)},function(t){W.call(this,e,t)}]}class At extends c{constructor(e){super(),d(this,e,Lt,Qt,u,{label:1,disabled:2,checked:0,details:3,type:4})}}function Tt(e,t,n){const a=e.slice();return a[12]=t[n],a}function jt(e){let t,n,a,r,s,i,l;function o(t){e[7](t)}let c={id:"pref-langs"};return void 0!==e[3]&&(c.items=e[3]),t=new yt({props:c}),S.push((()=>se(t,"items",o))),{c(){F(t.$$.fragment),a=N(),r=g("div"),s=g("small"),i=I("Enter each language code and separate them by a comma (,).")},l(e){q(t.$$.fragment,e),a=C(e),r=w(e,"DIV",{});var n=y(r);s=w(n,"SMALL",{});var l=y(s);i=M(l,"Enter each language code and separate them by a comma (,)."),l.forEach(v),n.forEach(v)},m(e,n){V(t,e,n),x(e,a,n),x(e,r,n),R(r,s),R(s,i),l=!0},p(e,a){const r={};!n&&8&a&&(n=!0,r.items=e[3],oe((()=>n=!1))),t.$set(r)},i(e){l||(h(t.$$.fragment,e),l=!0)},o(e){$(t.$$.fragment,e),l=!1},d(e){H(t,e),e&&v(a),e&&v(r)}}}function St(e){let t,n;return t=new Ce({props:{labelFor:"pref-langs",label:"Choose languages",$$slots:{default:[jt]},$$scope:{ctx:e}}}),{c(){F(t.$$.fragment)},l(e){q(t.$$.fragment,e)},m(e,a){V(t,e,a),n=!0},p(e,n){const a={};32776&n&&(a.$$scope={dirty:n,ctx:e}),t.$set(a)},i(e){n||(h(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){H(t,e)}}}function Dt(e){let t;return{c(){t=I("Load")},l(e){t=M(e,"Load")},m(e,n){x(e,t,n)},d(e){e&&v(t)}}}function Ot(e){let t;return{c(){t=I("Download")},l(e){t=M(e,"Download")},m(e,n){x(e,t,n)},d(e){e&&v(t)}}}function Bt(e){let t,n,a,r,s,i;return t=new ct({props:{summary:"Allowed",isTitle:!1,$$slots:{default:[It]},$$scope:{ctx:e}}}),a=new ct({props:{summary:"Unknown",isTitle:!1}}),s=new ct({props:{summary:"Denied",isTitle:!1}}),{c(){F(t.$$.fragment),n=N(),F(a.$$.fragment),r=N(),F(s.$$.fragment)},l(e){q(t.$$.fragment,e),n=C(e),q(a.$$.fragment,e),r=C(e),q(s.$$.fragment,e)},m(e,l){V(t,e,l),x(e,n,l),V(a,e,l),x(e,r,l),V(s,e,l),i=!0},p(e,n){const a={};32791&n&&(a.$$scope={dirty:n,ctx:e}),t.$set(a)},i(e){i||(h(t.$$.fragment,e),h(a.$$.fragment,e),h(s.$$.fragment,e),i=!0)},o(e){$(t.$$.fragment,e),$(a.$$.fragment,e),$(s.$$.fragment,e),i=!1},d(e){H(t,e),e&&v(n),H(a,e),e&&v(r),H(s,e)}}}function Pt(e,t){let n,a,r;return a=new At({props:{type:t[12],details:o(l({},t[2].context.data[t[12]]),{fc:void 0}),checked:t[4][t[12]].allow,label:t[2].context.data[t[12]].name,disabled:t[1]}}),a.$on("change",(function(){return t[10](t[12])})),a.$on("click",(function(...e){return t[11](t[12],...e)})),{key:e,first:null,c(){n=Y(),F(a.$$.fragment),this.h()},l(e){n=Y(),q(a.$$.fragment,e),this.h()},h(){this.first=n},m(e,t){x(e,n,t),V(a,e,t),r=!0},p(e,n){t=e;const r={};16&n&&(r.type=t[12]),20&n&&(r.details=o(l({},t[2].context.data[t[12]]),{fc:void 0})),16&n&&(r.checked=t[4][t[12]].allow),20&n&&(r.label=t[2].context.data[t[12]].name),2&n&&(r.disabled=t[1]),a.$set(r)},i(e){r||(h(a.$$.fragment,e),r=!0)},o(e){$(a.$$.fragment,e),r=!1},d(e){e&&v(n),H(a,e)}}}function It(e){let t,n,a=[],r=new Map,s=Object.keys(e[4]);const i=e=>e[12];for(let l=0;l<s.length;l+=1){let t=Tt(e,s,l),n=i(t);r.set(n,a[l]=Pt(n,t))}return{c(){t=g("div");for(let e=0;e<a.length;e+=1)a[e].c();this.h()},l(e){t=w(e,"DIV",{class:!0});var n=y(t);for(let t=0;t<a.length;t+=1)a[t].l(n);n.forEach(v),this.h()},h(){b(t,"class","flex flex-wrap gap-1")},m(e,r){x(e,t,r);for(let n=0;n<a.length;n+=1)a[n].m(t,null);n=!0},p(e,n){55&n&&(s=Object.keys(e[4]),k(),a=te(a,n,i,1,e,s,r,t,ne,Pt,null,Tt),E())},i(e){if(!n){for(let e=0;e<s.length;e+=1)h(a[e]);n=!0}},o(e){for(let t=0;t<a.length;t+=1)$(a[t]);n=!1},d(e){e&&v(t);for(let t=0;t<a.length;t+=1)a[t].d()}}}function Nt(e){let t,n,a,r,s,i,l,o,c,d=e[2].matches("updateLists");t=new at({props:{$$slots:{default:[St]},$$scope:{ctx:e}}}),r=new Ze({props:{disabled:e[1],isDown:!1,name:"load-wikidata",$$slots:{default:[Dt]},$$scope:{ctx:e}}}),r.$on("click",e[8]),i=new Ze({props:{disabled:e[1]||!e[2].matches("updateLists"),name:"download-wikidata",$$slots:{default:[Ot]},$$scope:{ctx:e}}}),i.$on("click",e[9]);let u=d&&Bt(e);return{c(){F(t.$$.fragment),n=N(),a=g("div"),F(r.$$.fragment),s=N(),F(i.$$.fragment),l=N(),u&&u.c(),o=Y(),this.h()},l(e){q(t.$$.fragment,e),n=C(e),a=w(e,"DIV",{class:!0});var c=y(a);q(r.$$.fragment,c),s=C(c),q(i.$$.fragment,c),c.forEach(v),l=C(e),u&&u.l(e),o=Y(),this.h()},h(){b(a,"class","my-2")},m(e,d){V(t,e,d),x(e,n,d),x(e,a,d),V(r,a,null),R(a,s),V(i,a,null),x(e,l,d),u&&u.m(e,d),x(e,o,d),c=!0},p(e,n){const a={};32776&n&&(a.$$scope={dirty:n,ctx:e}),t.$set(a);const s={};2&n&&(s.disabled=e[1]),32768&n&&(s.$$scope={dirty:n,ctx:e}),r.$set(s);const l={};6&n&&(l.disabled=e[1]||!e[2].matches("updateLists")),32768&n&&(l.$$scope={dirty:n,ctx:e}),i.$set(l),4&n&&(d=e[2].matches("updateLists")),d?u?(u.p(e,n),4&n&&h(u,1)):(u=Bt(e),u.c(),h(u,1),u.m(o.parentNode,o)):u&&(k(),$(u,1,1,(()=>{u=null})),E())},i(e){c||(h(t.$$.fragment,e),h(r.$$.fragment,e),h(i.$$.fragment,e),h(u),c=!0)},o(e){$(t.$$.fragment,e),$(r.$$.fragment,e),$(i.$$.fragment,e),$(u),c=!1},d(e){H(t,e),e&&v(n),e&&v(a),H(r),H(i),e&&v(l),u&&u.d(e),e&&v(o)}}}function Mt(e){let t,n;return t=new ct({props:{summary:"Wikidata",$$slots:{default:[Nt]},$$scope:{ctx:e}}}),{c(){F(t.$$.fragment)},l(e){q(t.$$.fragment,e)},m(e,a){V(t,e,a),n=!0},p(e,[n]){const a={};32799&n&&(a.$$scope={dirty:n,ctx:e}),t.$set(a)},i(e){n||(h(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){H(t,e)}}}function Ct(e,t,n){let a,r,s=P,i=()=>(s(),s=ce(l,(e=>n(2,r=e))),l);e.$$.on_destroy.push((()=>s()));let{wikiService:l}=t;i();let{loading:o=!1}=t,{wikidataLayer:c}=t,d=["fr","nl","en"];const u=(e,t)=>{if(e.detail.show)return c.highlight(t);c.lowlight(t)};return e.$$set=e=>{"wikiService"in e&&i(n(0,l=e.wikiService)),"loading"in e&&n(1,o=e.loading),"wikidataLayer"in e&&n(6,c=e.wikidataLayer)},e.$$.update=()=>{4&e.$$.dirty&&n(4,a=r.context.allowlist),68&e.$$.dirty&&r&&c&&r.context.data&&c.update(r.context.data)},[l,o,r,d,a,u,c,function(e){d=e,n(3,d)},()=>l.send("LOAD_DATA",{langs:d}),()=>l.send("DOWNLOAD_DATA"),e=>l.send("UPDATE_TYPE",{code:e}),(e,t)=>u(t,e)]}class Rt extends c{constructor(e){super(),d(this,e,Ct,Mt,u,{wikiService:0,loading:1,wikidataLayer:6})}}var Ut=(e,t)=>{const n=t+".geojson",a=JSON.stringify(e),r="data:application/json;charset=utf-8,"+encodeURIComponent(a),s=document.createElement("a");s.setAttribute("href",r),s.setAttribute("download",n),s.click(),s.remove()};function Ft(e){const t=e.split(".");return t.pop(),t.join(".")}class qt{constructor(e="https://query.wikidata.org/sparql"){this.endpoint=e}query(e,t=!0){const n=this.endpoint+"?query="+encodeURIComponent(e);return fetch(n,{headers:{Accept:"application/sparql-results+json"}}).then((e=>e.json())).then((e=>t?this.simplify(e):e))}simplify(e){return e.results.bindings.map((e=>(Object.keys(e).forEach((function(t){e[t]=e[t].value})),e)))}}var Vt=e=>fe(e.map((e=>{const t=e.location.replace("Point(","").replace(")","").split(" ").map(Number);return delete e.location,me(t,e)}))),Ht=async(e,t)=>{const n=new qt,a=pe(e);return he(Vt(await n.query(((e,t,n=["fr","nl","en"])=>{const a=n.reduce(((e,t)=>{const n=`?${t}Article`;return e[n]=`OPTIONAL {\n      ${n} schema:about ?place.\n      ${n} schema:isPartOf <https://${t}.wikipedia.org/>.\n    }`,e}),{});return`\n  SELECT ?place ?location ?placeLabel ?instance ?instanceLabel ?image ${Object.keys(a).join(" ")} ?prefArticle ?linkcount WHERE {\n    SERVICE wikibase:box {\n      ?place wdt:P625 ?location .\n      bd:serviceParam wikibase:cornerWest "Point(${e[0]} ${e[1]})"^^geo:wktLiteral .\n        bd:serviceParam wikibase:cornerEast "Point(${t[0]} ${t[1]})"^^geo:wktLiteral .\n      }\n    ?place wikibase:sitelinks ?linkcount;\n    OPTIONAL {\n      ?place wdt:P31 ?instance.\n    }\n    OPTIONAL { ?place wdt:P18 ?image. }\n    ${Object.values(a).join("\n")}\n    BIND(COALESCE(${Object.keys(a).join(", ")}, "") AS ?prefArticle)\n    FILTER (?prefArticle != "")\n    SERVICE wikibase:label { bd:serviceParam wikibase:language "${n.join(",")}". }\n  }`})([a[0],a[1]],[a[2],a[3]],t))),e)};var _t={deny:[{name:"Accident",id:"Q171558"},{name:"Belgian municipality with the title of city",id:"Q15273785"},{name:"Big city",id:"Q1549591"},{name:"Cemetery",id:"Q39614"},{name:"Farmhouse",id:"Q489357"},{name:"Human settlement",id:"Q486972"},{name:"Municipality of Belgium",id:"Q493522"},{name:"Municipality section",id:"Q2785216"},{name:"Road",id:"Q34442"},{name:"Prisons",id:"Q40357"},{name:"Railway station",id:"Q55488"},{name:"Railway tunnel",id:"Q1311958"},{name:"Street",id:"Q79007"},{name:"The bridges",id:"Q12280"},{name:"Tunnels",id:"Q44377"},{name:"Viaduc",id:"Q181348"},{name:"Village",id:"Q532"},{name:"Administrative arrondissement of Belgium",id:"Q91028"},{name:"City",id:"Q515"},{name:"Modern language",id:"Q1288568"},{name:"Language",id:"Q34770"},{name:"Province of Belgium",id:"Q83116"},{name:"Border town",id:"Q902814"},{name:"Square",id:"Q174782"},{name:"Neighborhood",id:"Q123705"},{name:"Town",id:"Q3957"},{name:"Station located underground",id:"Q22808403"},{name:"Metro station",id:"Q928830"},{name:"House",id:"Q3947"},{name:"Organization",id:"Q43229"},{name:"Region of Belgium",id:"Q83057"},{name:"Sovereign state",id:"Q3624078"},{name:"National road in Belgium",id:"Q1821082"},{name:"University",id:"Q3918"},{name:"Tram stop",id:"Q2175765"},{name:"European City",id:"Q1375749"},{name:"Global city",id:"Q208511"},{name:"Airport",id:"Q1248784"},{name:"Association football venue",id:"Q1154710"},{name:"Hamlet",id:"Q5084"},{name:"Area",id:"Q1414991"},{name:"School",id:"Q3914"},{name:"Municipalities with language facilities",id:"Q737681"},{name:"Community of Belgium",id:"Q89934"},{name:"Gristmill",id:"Q623605"},{name:"Capital",id:"Q5119"},{name:"Nation",id:"Q6266"},{name:"Mass murder",id:"Q750215"},{name:"Boundary marker",id:"Q921099"},{name:"Terrorist attack",id:"Q2223653"},{name:"Commercial traffic aerodrome",id:"Q94993988"},{name:"Embassy",id:"Q3917681"},{name:"Suicide bombing",id:"Q18493502"},{name:"Thoroughfare",id:"Q83620"}],allow:{architecture:{name:"Architecture & buildings",types:[{name:"Building",id:"Q41176"},{name:"Bridge",id:"Q12280"},{name:"Architectural structure",id:"Q811979"},{name:"Windmill",id:"Q38720"},{name:"City hall",id:"Q543654"},{name:"Belfry",id:"Q815448"},{name:"Cathedral",id:"Q2977"},{name:"Manor house",id:"Q879050"},{name:"War memorial",id:"Q575759"},{name:"Roman city",id:"Q2202509"}]},art:{name:"Art & Culture",types:[{name:"Museum",id:"Q33506"},{name:"Art museum",id:"Q207694"},{name:"Statue",id:"Q179700"},{name:"Archive",id:"Q166118"},{name:"Military museum",id:"Q2772772"},{name:"Heritage library",id:"Q2208411"},{name:"Theatre",id:"Q24354"},{name:"Sculpture",id:"Q860861"}]},bio:{name:"Bio & Permaculture",types:[]},food:{name:"Food & Drinks",types:[{name:"Abbey",id:"Q160742"},{name:"Brewery",id:"Q131734"}]},history:{name:"History",types:[{name:"Château",id:"Q751876"},{name:"Battle",id:"Q178561"},{name:"Commonwealth War Graves Commission maintained cemetery",id:"Q14750991"},{name:"Castle",id:"Q23413"},{name:"Abbey",id:"Q160742"},{name:"Monastery",id:"Q44613"},{name:"Fort",id:"Q1785071"},{name:"Statue",id:"Q179700"},{name:"Archive",id:"Q166118"},{name:"Siege",id:"Q188055"},{name:"Belfry",id:"Q815448"},{name:"Heritage library",id:"Q2208411"},{name:"Cathedral",id:"Q2977"},{name:"Sculpture",id:"Q860861"},{name:"Manor house",id:"Q879050"},{name:"War memorial",id:"Q575759"},{name:"Tumulus",id:"Q34023"},{name:"Enclave",id:"Q171441"},{name:"Roman city",id:"Q2202509"}]},miscellaneous:{name:"Hidden miscellaneous places ",types:[{name:"Tourist attraction",id:"Q570116"}]},nature:{name:"Wildlife & Nature",types:[{name:"Natural landscape",id:"Q1286517"},{name:"Forest",id:"Q4421"},{name:"Park",id:"Q22698"},{name:"Hill",id:"Q54050"},{name:"Mountain",id:"Q8502"}]},photography:{name:"Photography",types:[{name:"Windmill",id:"Q38720"},{name:"Tourist attraction",id:"Q570116"}]},religious:{name:"Religious buildings",types:[{name:"Parish church",id:"Q317557"},{name:"Chapel",id:"Q108325"},{name:"Church building",id:"Q16970"},{name:"Abbey",id:"Q160742"},{name:"Monastery",id:"Q44613"},{name:"Cathedral",id:"Q2977"}]},science:{name:"Science",types:[{name:"Federal scientific Institute",id:"Q2288140"}]},sports:{name:"Sports",types:[{name:"Association football venue",id:"Q1154710"},{name:"Stadium",id:"Q483110"}]},water:{name:"Seaside & water",types:[{name:"River",id:"Q4022"},{name:"Canal",id:"Q12284"},{name:"Main stream",id:"Q573344"},{name:"Stream",id:"Q47521"},{name:"Watermill",id:"Q185187"},{name:"Fountain",id:"Q483453"},{name:"Port settlement",id:"Q2264924"},{name:"Seaport",id:"Q15310171"}]}}};const Wt=(e,t)=>{const n={},a=new Set(Array.isArray(t)?t:Object.keys(t));return Object.keys(e).forEach((r=>{Array.isArray(t)||(e[r].categories=t[r]),a.has(r)&&(n[r]=e[r])})),n};const zt={geojson:void 0,error:void 0,radius:1,buffer:void 0,file:void 0},Gt=$e({langs:(e,t)=>t.langs}),Yt=$e({allowlist:(e,t)=>{const n=e.allowlist;return n[t.code].allow=!n[t.code].allow,n}}),Jt=$e({allowlist:e=>((e,t=!0)=>{const n={};return e.forEach((e=>{n[e]={code:e,allow:t}})),n})(Object.keys(Wt(e.data,(()=>{const e={};for(const t in _t.allow)for(const n of _t.allow[t].types)e[n.id]||(e[n.id]=[]),e[n.id].push(_t.allow[t].name);return e})())))}),Zt={data:void 0,allowlist:{},langs:["fr","nl","en"]},Xt=ge({id:"wikidata",context:l(l({},Zt),zt),initial:"idle",states:{idle:{entry:["initLangs","clearAllowlist"],on:{LOAD_DATA:{target:"load",actions:"addLangs"}}},load:{tags:["loading"],entry:we("QUERYING"),exit:we("DONE_QUERYING"),invoke:{id:"fetch-wikidata",src:e=>new Promise((t=>t(Ht(e.buffer,e.langs)))),onDone:{target:"updateLists",actions:[$e({data:(e,t)=>function(e){const t={};return e.features.forEach((e=>{const n=e.properties.instance?e.properties.instance.split("/").pop():"unknown";t[n]||(t[n]={fc:fe([]),linkcount:0,itemcount:0,name:e.properties.instanceLabel}),t[n].fc.features.push(e),t[n].linkcount+=parseInt(e.properties.linkcount,10),t[n].itemcount+=1})),t}(t.data)}),"fillAllowlist"]},onError:{target:"idle",actions:$e({error:(e,t)=>t.data})}}},download:{tags:["loading"],entry:we("QUERYING"),exit:we("DONE_QUERYING"),invoke:{id:"download-wikidata",src:e=>new Promise((t=>{const n=Object.keys(e.allowlist).filter((t=>e.allowlist[t].allow));return t(Ut(fe(Object.values(Wt(e.data,n)).reduce(((e,t)=>e.concat(t.fc.features)),[])),`${Ft(e.file.name)}---${1e3*e.radius}m---wikidata`))})),onDone:{target:"updateLists"},onError:{target:"idle",actions:$e({error:(e,t)=>t.data})}}},updateLists:{on:{DOWNLOAD_DATA:"download",UPDATE_TYPE:{actions:"updateType"}}}}},{actions:{addLangs:Gt,updateType:Yt,initLangs:$e({langs:Zt.langs}),clearAllowlist:$e({allowlist:{}}),clearData:$e({data:void 0}),fillAllowlist:Jt}});var Kt=[{name:"Supermarket and convenience store",query:[{shop:"convenience"},{shop:"supermarket"}]},{name:"Bicycle shop",query:[{shop:"bicycle"}]},{name:"Playground",query:[{leisure:"playground"}]},{name:"Bakery",query:[{shop:"bakery"}]},{name:"Café and restaurant",query:[{amenity:"cafe"},{amenity:"restaurant"}]},{name:"Benches",query:[{amenity:"bench"}]}],en=async(e,t,n)=>{const a=ye(e,{highQuality:!0,mutate:!1,tolerance:.05});let r="";a.features.forEach((e=>e.geometry.coordinates[0].forEach((e=>{r+=e[1]+" "+e[0]+" "})))),r=r.trimEnd();let s="";t.map((e=>s+=`nwr["${Object.keys(e)[0]}"="${e[Object.keys(e)[0]]}"](poly:"${r}");`));const i=`[out:json][timeout:150];(${s});(._;>;);out center;`,l=await(async e=>{const t=await fetch("https://overpass-api.de/api/interpreter?data="+encodeURIComponent(e),{mode:"cors",headers:{"Content-Type":"application/json"}});if(!t.ok){const e=`An error has occured: ${t.status}`;throw new Error(e)}return await t.json()})(i),o=ve(l);Ut(o,n)};const tn=$e({query:(e,t)=>t.query}),nn=$e({name:(e,t)=>t.name}),an=ge({id:"overpass",initial:"idle",states:{idle:{on:{DOWNLOAD_DATA:{target:"download",actions:["addQuery","addName"]}}},download:{tags:["loading"],entry:we("QUERYING"),exit:we("DONE_QUERYING"),invoke:{id:"download-overpass",src:e=>new Promise((t=>t(en(e.buffer,e.query,`${Ft(e.file.name)}---${1e3*e.radius}m---${e.name}`)))),onDone:{target:"idle"},onError:{target:"idle",actions:$e({error:(e,t)=>t.data})}}}}},{actions:{addQuery:tn,addName:nn}}),rn=$e({file:(e,t)=>t.file}),sn=$e({radius:(e,t)=>t.radius}),ln=ge({id:"app",context:l({},zt),initial:"idle",states:{idle:{on:{FILE_UPLOAD:{target:"processFile",actions:["addFile","clearError","clearGeoJSON"]}}},radius:{entry:"updateRadius",always:{}},processFile:{tags:["loading"],invoke:{id:"file-processing",src:e=>{return t=e.file,new Promise(((e,n)=>{const a=t.name.split(".").pop();if(!t||"geojson"!==a&&"gpx"!==a)return n(new Error("Format not supported. Please provide a .geojson or .gpx."));{const r=new FileReader;r.addEventListener("load",(()=>{const t=r.result;return t?e("geojson"===a?JSON.parse(t):de((new DOMParser).parseFromString(t,"text/xml"))):n(new Error("Could not read the provided file."))})),r.readAsText(t)}}));var t},onDone:{target:"generateBuffer",actions:$e({geojson:(e,t)=>t.data})},onError:{target:"idle",actions:[$e({error:(e,t)=>t.data}),"clearFile"]}}},generateBuffer:{tags:["loading"],invoke:{id:"buffer",src:e=>new Promise((t=>t(((e,t)=>{const n=ue(e,t,{units:"kilometers"});if(!n)throw new Error("Unable to create a buffer.");return n})(e.geojson,e.radius)))),onDone:{target:"query",actions:$e({buffer:(e,t)=>t.data})},onError:{target:"idle",actions:[$e({error:(e,t)=>t.data}),"clearFile","clearGeoJSON"]}}},query:{initial:"pending",invoke:[{id:"wikiMachine",src:Xt,data:e=>l({},e)},{id:"overpassMachine",src:an,data:e=>l({},e)}],states:{querying:{tags:["loading"],on:{DONE_QUERYING:"pending"}},pending:{on:{UPDATE_RADIUS:{target:"#app.generateBuffer",actions:"updateRadius"},FILE_UPLOAD:{target:"#app.processFile",actions:["addFile","clearError","clearGeoJSON","clearBuffer"]},QUERYING:{target:"querying"}}}}}}},{actions:{addFile:rn,clearError:$e({error:void 0}),clearGeoJSON:$e({geojson:void 0}),clearFile:$e({file:void 0}),clearBuffer:$e({buffer:void 0}),updateRadius:sn}});function on(e,t,n){const a=e.slice();return a[3]=t[n].query,a[4]=t[n].name,a}function cn(e){let t,n,a=e[4]+"";return{c(){t=I(a),n=N()},l(e){t=M(e,a),n=C(e)},m(e,a){x(e,t,a),x(e,n,a)},p:P,d(e){e&&v(t),e&&v(n)}}}function dn(e,t){let n,a,r;return a=new Ze({props:{name:t[4],disabled:t[1],$$slots:{default:[cn]},$$scope:{ctx:t}}}),a.$on("click",(function(){return t[2](t[3],t[4])})),{key:e,first:null,c(){n=Y(),F(a.$$.fragment),this.h()},l(e){n=Y(),q(a.$$.fragment,e),this.h()},h(){this.first=n},m(e,t){x(e,n,t),V(a,e,t),r=!0},p(e,n){t=e;const r={};2&n&&(r.disabled=t[1]),128&n&&(r.$$scope={dirty:n,ctx:t}),a.$set(r)},i(e){r||(h(a.$$.fragment,e),r=!0)},o(e){$(a.$$.fragment,e),r=!1},d(e){e&&v(n),H(a,e)}}}function un(e){let t,n,a=[],r=new Map,s=Kt;const i=e=>e[4];for(let l=0;l<s.length;l+=1){let t=on(e,s,l),n=i(t);r.set(n,a[l]=dn(n,t))}return{c(){t=g("div");for(let e=0;e<a.length;e+=1)a[e].c();this.h()},l(e){t=w(e,"DIV",{class:!0});var n=y(t);for(let t=0;t<a.length;t+=1)a[t].l(n);n.forEach(v),this.h()},h(){b(t,"class","flex flex-wrap gap-1")},m(e,r){x(e,t,r);for(let n=0;n<a.length;n+=1)a[n].m(t,null);n=!0},p(e,n){3&n&&(s=Kt,k(),a=te(a,n,i,1,e,s,r,t,ne,dn,null,on),E())},i(e){if(!n){for(let e=0;e<s.length;e+=1)h(a[e]);n=!0}},o(e){for(let t=0;t<a.length;t+=1)$(a[t]);n=!1},d(e){e&&v(t);for(let t=0;t<a.length;t+=1)a[t].d()}}}function fn(e){let t,n;return t=new ct({props:{summary:"Overpass",$$slots:{default:[un]},$$scope:{ctx:e}}}),{c(){F(t.$$.fragment)},l(e){q(t.$$.fragment,e)},m(e,a){V(t,e,a),n=!0},p(e,[n]){const a={};131&n&&(a.$$scope={dirty:n,ctx:e}),t.$set(a)},i(e){n||(h(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){H(t,e)}}}function mn(e,t,n){let{overpassService:a}=t,{loading:r=!1}=t;return e.$$set=e=>{"overpassService"in e&&n(0,a=e.overpassService),"loading"in e&&n(1,r=e.loading)},[a,r,(e,t)=>a.send("DOWNLOAD_DATA",{query:e,name:t})]}class pn extends c{constructor(e){super(),d(this,e,mn,fn,u,{overpassService:0,loading:1})}}function hn(e,t,n){let a;const{getMap:r}=D(Ee),s=r(),i=e=>{const{placeLabel:t,instanceLabel:n,prefArticle:a,image:r}=e.features[0].properties,i=e.features[0].geometry.coordinates.slice();for(;Math.abs(e.lngLat.lng-i[0])>180;)i[0]+=e.lngLat.lng>i[0]?360:-360;(new L.Popup).setLngLat(i).setHTML(`<h2 class="font-bold text-xl mb-1">${t}</h2>\n       <p class="italic" class="mb-2">${n}</p>\n       ${r?`<img class="block max-w-full mb-2" src="${r}"" />`:""}\n       <a href="${a}"" target="_blank" rel="noopener noreferrer" class="text-purple-600 hover:underline break-all">${a}</a>`).addTo(s)},l=()=>{s.getCanvas().style.cursor="pointer"},o=()=>{s.getCanvas().style.cursor="pointer"},c=e=>{e.forEach((e=>(e=>{s.addSource(e,{type:"geojson",data:{type:"FeatureCollection",features:[]}}),s.addLayer({id:e,source:e,type:"circle",paint:{"circle-radius":7}}),s.on("click",e,i),s.on("mouseenter",e,l),s.on("mouseleave",e,o)})(e)))},d=e=>{e.forEach((e=>(e=>{s.off("click",e,i),s.off("mouseenter",e,l),s.off("mouseleave",e,o),s.removeLayer(e),s.removeSource(e)})(e)))};return T((()=>{a&&d(a)})),[function(e){const t=new Set(Object.keys(e));a?(d(Array.from(a).filter((e=>!t.has(e)))),c(Array.from(t).filter((e=>!a.has(e))))):c(t),(e=>{Object.keys(e).forEach((t=>{s.getSource(t).setData(Object.assign({},e[t].fc))}))})(e),a=t},function(e){s.setPaintProperty(e,"circle-radius",10),s.setPaintProperty(e,"circle-color","#FBBF24"),s.moveLayer(e)},function(e){s.setPaintProperty(e,"circle-radius",7),s.setPaintProperty(e,"circle-color",void 0)}]}class $n extends c{constructor(e){super(),d(this,e,hn,null,u,{update:0,highlight:1,lowlight:2})}get update(){return this.$$.ctx[0]}get highlight(){return this.$$.ctx[1]}get lowlight(){return this.$$.ctx[2]}}function gn(e){let t,n,a;return{c(){t=G("svg"),n=G("path"),this.h()},l(e){t=w(e,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0},1);var a=y(t);n=w(a,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0},1),y(n).forEach(v),a.forEach(v),this.h()},h(){b(n,"stroke-linecap","round"),b(n,"stroke-linejoin","round"),b(n,"stroke-width","2"),b(n,"d","M6 18L18 6M6 6l12 12"),b(t,"xmlns","http://www.w3.org/2000/svg"),b(t,"class","h-10 w-10"),b(t,"fill","none"),b(t,"viewBox","0 0 24 24"),b(t,"stroke","currentColor")},m(e,a){x(e,t,a),R(t,n)},i(e){a||Z((()=>{a=ie(n,re,{}),a.start()}))},o:P,d(e){e&&v(t)}}}function wn(e){let t,n,a;return{c(){t=G("svg"),n=G("path"),this.h()},l(e){t=w(e,"svg",{class:!0,xmlns:!0,fill:!0,viewBox:!0,stroke:!0,"aria-hidden":!0},1);var a=y(t);n=w(a,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0},1),y(n).forEach(v),a.forEach(v),this.h()},h(){b(n,"stroke-linecap","round"),b(n,"stroke-linejoin","round"),b(n,"stroke-width","2"),b(n,"d","M4 6h16M4 12h16M4 18h16"),b(t,"class","block h-10 w-10"),b(t,"xmlns","http://www.w3.org/2000/svg"),b(t,"fill","none"),b(t,"viewBox","0 0 24 24"),b(t,"stroke","currentColor"),b(t,"aria-hidden","true")},m(e,a){x(e,t,a),R(t,n)},i(e){a||Z((()=>{a=ie(n,re,{}),a.start()}))},o:P,d(e){e&&v(t)}}}function yn(e){let t,n,a;function r(t){e[16](t)}let s={disabled:e[6]};return void 0!==e[0]&&(s.files=e[0]),t=new qe({props:s}),S.push((()=>se(t,"files",r))),{c(){F(t.$$.fragment)},l(e){q(t.$$.fragment,e)},m(e,n){V(t,e,n),a=!0},p(e,a){const r={};64&a&&(r.disabled=e[6]),!n&&1&a&&(n=!0,r.files=e[0],oe((()=>n=!1))),t.$set(r)},i(e){a||(h(t.$$.fragment,e),a=!0)},o(e){$(t.$$.fragment,e),a=!1},d(e){H(t,e)}}}function vn(e){let t,n,a,r,s,i;return t=new at({props:{$$slots:{help:[kn],default:[xn]},$$scope:{ctx:e}}}),a=new pn({props:{overpassService:e[7],loading:e[6]}}),s=new Rt({props:{wikiService:e[8],loading:e[6],wikidataLayer:e[3]}}),{c(){F(t.$$.fragment),n=N(),F(a.$$.fragment),r=N(),F(s.$$.fragment)},l(e){q(t.$$.fragment,e),n=C(e),q(a.$$.fragment,e),r=C(e),q(s.$$.fragment,e)},m(e,l){V(t,e,l),x(e,n,l),V(a,e,l),x(e,r,l),V(s,e,l),i=!0},p(e,n){const r={};4194370&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r);const i={};128&n&&(i.overpassService=e[7]),64&n&&(i.loading=e[6]),a.$set(i);const l={};256&n&&(l.wikiService=e[8]),64&n&&(l.loading=e[6]),8&n&&(l.wikidataLayer=e[3]),s.$set(l)},i(e){i||(h(t.$$.fragment,e),h(a.$$.fragment,e),h(s.$$.fragment,e),i=!0)},o(e){$(t.$$.fragment,e),$(a.$$.fragment,e),$(s.$$.fragment,e),i=!1},d(e){H(t,e),e&&v(n),H(a,e),e&&v(r),H(s,e)}}}function bn(e){let t,n,a;function r(t){e[17](t)}let s={type:"number",id:"radius",max:Tn,disabled:e[6]};return void 0!==e[1]&&(s.value=e[1]),t=new Ie({props:s}),S.push((()=>se(t,"value",r))),{c(){F(t.$$.fragment)},l(e){q(t.$$.fragment,e)},m(e,n){V(t,e,n),a=!0},p(e,a){const r={};64&a&&(r.disabled=e[6]),!n&&2&a&&(n=!0,r.value=e[1],oe((()=>n=!1))),t.$set(r)},i(e){a||(h(t.$$.fragment,e),a=!0)},o(e){$(t.$$.fragment,e),a=!1},d(e){H(t,e)}}}function xn(e){let t,n;return t=new Ce({props:{labelFor:"radius",label:"Radius (meters)",$$slots:{default:[bn]},$$scope:{ctx:e}}}),{c(){F(t.$$.fragment)},l(e){q(t.$$.fragment,e)},m(e,a){V(t,e,a),n=!0},p(e,n){const a={};4194370&n&&(a.$$scope={dirty:n,ctx:e}),t.$set(a)},i(e){n||(h(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){H(t,e)}}}function kn(e){let t,n;return{c(){t=g("small"),n=I("Only values between 1 and 50000 are allowed"),this.h()},l(e){t=w(e,"SMALL",{slot:!0});var a=y(t);n=M(a,"Only values between 1 and 50000 are allowed"),a.forEach(v),this.h()},h(){b(t,"slot","help")},m(e,a){x(e,t,a),R(t,n)},d(e){e&&v(t)}}}function En(e){let t,n;return t=new Se({props:{trail:e[2].context.geojson}}),{c(){F(t.$$.fragment)},l(e){q(t.$$.fragment,e)},m(e,a){V(t,e,a),n=!0},p(e,n){const a={};4&n&&(a.trail=e[2].context.geojson),t.$set(a)},i(e){n||(h(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){H(t,e)}}}function Qn(e){let t,n;return t=new Oe({props:{buffer:e[2].context.buffer}}),{c(){F(t.$$.fragment)},l(e){q(t.$$.fragment,e)},m(e,a){V(t,e,a),n=!0},p(e,n){const a={};4&n&&(a.buffer=e[2].context.buffer),t.$set(a)},i(e){n||(h(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){H(t,e)}}}function Ln(e){let t,n,a,r,s=e[2].context.geojson&&En(e),i=e[2].context.buffer&&Qn(e);return a=new $n({props:{}}),e[18](a),{c(){s&&s.c(),t=N(),i&&i.c(),n=N(),F(a.$$.fragment)},l(e){s&&s.l(e),t=C(e),i&&i.l(e),n=C(e),q(a.$$.fragment,e)},m(e,l){s&&s.m(e,l),x(e,t,l),i&&i.m(e,l),x(e,n,l),V(a,e,l),r=!0},p(e,r){e[2].context.geojson?s?(s.p(e,r),4&r&&h(s,1)):(s=En(e),s.c(),h(s,1),s.m(t.parentNode,t)):s&&(k(),$(s,1,1,(()=>{s=null})),E()),e[2].context.buffer?i?(i.p(e,r),4&r&&h(i,1)):(i=Qn(e),i.c(),h(i,1),i.m(n.parentNode,n)):i&&(k(),$(i,1,1,(()=>{i=null})),E());a.$set({})},i(e){r||(h(s),h(i),h(a.$$.fragment,e),r=!0)},o(e){$(s),$(i),$(a.$$.fragment,e),r=!1},d(r){s&&s.d(r),r&&v(t),i&&i.d(r),r&&v(n),e[18](null),H(a,r)}}}function An(e){let t,n,a,r,s,i,l,o,c,d,u,f,m,p,Q,L,A,T,j,S,D=e[2].matches("query");function O(e,t){return e[5]?gn:wn}let P=O(e),U=P(e);p=new at({props:{$$slots:{default:[yn]},$$scope:{ctx:e}}});let _=D&&vn(e),W={initialLat:e[12].lat,initialLon:e[12].lon,initialZoom:7,$$slots:{default:[Ln]},$$scope:{ctx:e}};return A=new Te({props:W}),e[19](A),{c(){t=g("main"),n=g("header"),a=g("button"),U.c(),r=N(),s=g("div"),i=g("h1"),l=I("sstt"),o=N(),c=g("div"),d=I("query service"),u=N(),f=g("div"),m=g("div"),F(p.$$.fragment),Q=N(),_&&_.c(),L=N(),F(A.$$.fragment),this.h()},l(e){t=w(e,"MAIN",{class:!0});var h=y(t);n=w(h,"HEADER",{class:!0});var $=y(n);a=w($,"BUTTON",{type:!0,class:!0,"aria-controls":!0,"aria-expanded":!0});var g=y(a);U.l(g),g.forEach(v),r=C($),s=w($,"DIV",{class:!0});var b=y(s);i=w(b,"H1",{class:!0});var x=y(i);l=M(x,"sstt"),x.forEach(v),o=C(b),c=w(b,"DIV",{role:!0,class:!0});var k=y(c);d=M(k,"query service"),k.forEach(v),b.forEach(v),$.forEach(v),u=C(h),f=w(h,"DIV",{class:!0});var E=y(f);m=w(E,"DIV",{class:!0});var T=y(m);q(p.$$.fragment,T),Q=C(T),_&&_.l(T),T.forEach(v),L=C(E),q(A.$$.fragment,E),E.forEach(v),h.forEach(v),this.h()},h(){b(a,"type","button"),b(a,"class","self-center inline-flex items-center justify-center p-2 rounded-md text-gray-800 hover:text-white hover:bg-gray-700 \n      focus:outline-none focus:ring-2 focus:ring-inset border-2"),b(a,"aria-controls","mobile-menu"),b(a,"aria-expanded",e[5]),b(i,"class","text-4xl font-bold"),b(c,"role","doc-subtitle"),b(c,"class","italic text-gray-700 text-sm"),b(s,"class","ml-5"),b(n,"class","w-full h-20 border-b shadow px-2 flex"),b(m,"class","w-60 md:w-96 flex flex-col p-2 max-h-full overflow-y-auto flex-shrink-0 svelte-13texe6"),le(m,"hide",!e[5]),b(f,"class","flex w-full h-full"),b(t,"class","w-full h-full flex flex-col")},m(h,$){x(h,t,$),R(t,n),R(n,a),U.m(a,null),R(n,r),R(n,s),R(s,i),R(i,l),R(s,o),R(s,c),R(c,d),R(t,u),R(t,f),R(f,m),V(p,m,null),R(m,Q),_&&_.m(m,null),R(f,L),V(A,f,null),T=!0,j||(S=B(a,"click",e[13]),j=!0)},p(e,[t]){P!==(P=O(e))&&(U.d(1),U=P(e),U&&(U.c(),h(U,1),U.m(a,null))),(!T||32&t)&&b(a,"aria-expanded",e[5]);const n={};4194369&t&&(n.$$scope={dirty:t,ctx:e}),p.$set(n),4&t&&(D=e[2].matches("query")),D?_?(_.p(e,t),4&t&&h(_,1)):(_=vn(e),_.c(),h(_,1),_.m(m,null)):_&&(k(),$(_,1,1,(()=>{_=null})),E()),32&t&&le(m,"hide",!e[5]);const r={};4194316&t&&(r.$$scope={dirty:t,ctx:e}),A.$set(r)},i(e){T||(h(U),h(p.$$.fragment,e),h(_),h(A.$$.fragment,e),T=!0)},o(e){$(p.$$.fragment,e),$(_),$(A.$$.fragment,e),T=!1},d(n){n&&v(t),U.d(),H(p),_&&_.d(),e[19](null),H(A),j=!1,S()}}}const Tn=5e4;function jn(e,t,n){let a,r,s,i;const{state:l,send:o,service:c}=be.useMachine(ln);xe(e,l,(e=>n(2,r=e)));const d=be.useSelector(c,(e=>e.children.wikiMachine));xe(e,d,(e=>n(8,i=e)));const u=be.useSelector(c,(e=>e.children.overpassMachine));xe(e,u,(e=>n(7,s=e)));let f,m,p,h,$,g=1e3,w=!0;return e.$$.update=()=>{49154&e.$$.dirty&&(n(14,m=g/1e3),g<=0?n(14,m=.001):g>Tn&&n(14,m=50),clearTimeout(p),n(15,p=setTimeout((()=>o("UPDATE_RADIUS",{radius:m})),500))),1&e.$$.dirty&&f&&o("FILE_UPLOAD",{file:f[0]}),4&e.$$.dirty&&n(6,a=r.hasTag("loading"))},[f,g,r,h,$,w,a,s,i,l,d,u,{lat:51,lon:4.5},()=>{n(5,w=!w),ke().then((()=>$.invalidateSize()))},m,p,function(e){f=e,n(0,f)},function(e){g=e,n(1,g)},function(e){S[e?"unshift":"push"]((()=>{h=e,n(3,h)}))},function(e){S[e?"unshift":"push"]((()=>{$=e,n(4,$)}))}]}class Sn extends c{constructor(e){super(),d(this,e,jn,An,u,{})}}export{Sn as default};
